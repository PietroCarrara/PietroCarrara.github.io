<!--
    Shortcode to display a figure (supports videos and images)

    Arguments:
        - 0: The file path
        - Inner: The caption of the figure
-->

{{ $media := .Page.Resources.GetMatch (.Get 0) }}

<div class="w-100 center">
    <figure>
        {{ with $media }}
            {{ if eq .ResourceType "video" }}
                <video muted autoplay loop src="{{ .Permalink }}" class="w-66 floating"></video>
            {{ end }}
            {{ if eq .ResourceType "image" }}
                <img src="{{ (.Fit "800x600 webp").Permalink }}" class="w-66 floating">
            {{ end }}
            {{ if eq .ResourceType "audio" }}
                <audio class="w-66 floating" src="{{ .Permalink }}" controls></audio>
            {{ end }}
        {{ end }}

        <figcaption><em>{{ .Inner | safeHTML }}</em></figcaption>
    </figure>
</div>